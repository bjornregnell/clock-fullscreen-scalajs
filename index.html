<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Fullscreen Clock in ScalaJS</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  </head>
  <body>
    <script type="text/javascript" src="./main.js"></script>
    <script>
      let wakeLock = null;

      async function requestWakeLock() {
        try {
          if ('wakeLock' in navigator) {
            wakeLock = await navigator.wakeLock.request('screen');
            console.log('Wake lock active');

            wakeLock.addEventListener('release', () => {
              console.log('Wake lock was released');
            });
          }
        } catch (err) {
          console.error(`${err.name}, ${err.message}`);
        }
      }

      // Re-request on visibility change (some browsers release it when tab is hidden)
      document.addEventListener('visibilitychange', () => {
        if (document.visibilityState === 'visible') {
          requestWakeLock();
        }
      });

      // Request on load
      requestWakeLock();
    </script>
  </body>
</html>